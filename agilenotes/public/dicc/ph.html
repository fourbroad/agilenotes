<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title></title>
  <link rel="stylesheet" type="text/css" href="../stylesheets/jquery.mobile.flatui.min.css" />
  <link rel="stylesheet" href="../stylesheets/mobiscroll.custom-2.6.0.min.css">
  <!-- jQuery and jQuery Mobile -->
  <script src="../javascripts/jquery-1.8.2.min.js"></script>
  <script src="../javascripts/jquery.mobile-1.3.1.min.js"></script>
  <script src="../javascripts/mobiscroll.custom-2.6.0.min.js"></script>
  <style>
	html,body,p,a{font-family:"微软雅黑";padding:0;margin:0;}
	h3{font-weight:normal;}
  </style>
</head>
<body>
<!-- Home -->
<div data-role="page" id="page1">
    <div data-role="content" >
        <form action="">
			<div data-role="fieldcontain">
				<label for="PHName">姓名：</label>
				<input type="text" value="" placeholder="" id="PHName" name="PHName" />
			</div>
			<div data-role="fieldcontain">
				<label for="PHIdNoType">
					证件类型：
				</label>
				<select id="PHIdNoType" data-native-menu="false" name="PHIdNoType">
					<option value="IDcard">身份证</option>
					<option value="Passport">护照</option>
					<option value="Other">其他</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="PHIdNo">证件号码：</label>
				<input type="text" value="" placeholder="" id="PHIdNo" name="PHIdNo" />
			</div>
			<div data-role="fieldcontain">
				<label for="PHBirth">生日：</label>
				<input type="text" value="" placeholder="" id="PHBirth" name="PHBirth" />
			</div>
			<div data-role="fieldcontain">
				<label for="PHTel">联系电话：</label>
				<input type="text" value="" placeholder="" id="PHTel" name="PHTel" />
			</div>
			<div data-role="fieldcontain">
				<label for="PHMail">E-mail：</label>
				<input type="text" value="" placeholder="" id="PHMail" name="PHMail" />
			</div>
			<a href="#addCom" data-rel="popup" data-role="button" data-inline="true" data-transition="pop">添加为默认投保人</a>
			<div data-role="popup" id="addCom" data-theme="e">
				<p>添加成功！</p>
			</div>
			<input data-theme="b" value="保存" type="submit">
        </form>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
function insured(sel){
	this.value=[];
	this.dom=$(sel);
}
insured.prototype.getValue=function(){
	return this.value;
}
insured.prototype.setValue=function(val){
	if($.isArray(val)){
		var str='';
		for(var i=0;i<val.length;i++){
			str += '<li><a href="insured.html" data-transition="slide">'+val[i].Name+' '+val[i].IdNo+'</a></li>';
		}
		this.dom.html(str);
		this.dom.data("mobileListview").refresh();
		this.value=val;
	}
}
insured.prototype.add=function(obj){
	if(obj&&obj.Name){
		var str= '<li><a href="insured.html" data-transition="slide">'+obj.Name+' '+obj.IdNo+'</a></li>';
		this.dom.append(str);
		this.dom.data("mobileListview").refresh();
		this.value.push(obj);
	}
}
var errors={
	DateStart:"请输入保单起始日期",
	DateEnd:"请输入保单结束日期",
	PHName:"请填写投保人姓名",
	PHIdNo:"请填写投保人证件号",
	PHBirth:"请输入投保人生日",
	PHTel:"请填写投保人联系电话",
	PHMail:"请正确填写投保人邮箱",
	Name:"请填写被保人姓名",
	IdNo:"请填写被保人证件号",
	BirthDt:"请填写被保人生日",
	Tel:"请填写被保人联系电话"
};
$(document).ready(function(){
	var opts={
		theme: "ios",
		lang: "zh",
		display: "bottom",
		mode: "scroller",
		dateFormat:"yy-mm-dd",
		dateOrder: "yymmdd"
	};
	var dts=$.extend({
		minDate:new Date("2013/09/01"),
		maxDate:new Date("2014/09/01"),
		onSelect:function(val){
			var newOpts={
				minDate:new Date(val.replace(/-/g,"/")),
				maxDate:new Date("2014/09/01")
			};
			$("#DateEnd").mobiscroll().date($.extend(newOpts,opts));
		}
	},opts);
	var dte=$.extend({
		minDate:new Date("2013/09/01"),
		maxDate:new Date("2014/09/01")
	},opts);
	var birth=$.extend({
		minDate:new Date("1940/01/01"),
		maxDate:new Date()
	},opts);
	$("#DateStart").mobiscroll().date(dts);
	$("#DateEnd").mobiscroll().date(dte);
	$("#PHBirth").mobiscroll().date(birth);
	$("#BirthDt").mobiscroll().date(birth);

	var insuerdObj=new insured($("#Insured"));
	insuerdObj.setValue([{"Name":"张三","IdNo":"42011245411542","IdNoType":"Other","BirthDt":"1985-05-05","Tel":"15012415412"}]);

	$("#saveInsuerd").bind("tap",function(){
		var result={};
		result.Name=$("#Name").val();
		result.IdNoType=$("#IdNoType").val();
		result.IdNo=$("#IdNo").val();
		result.BirthDt=$("#BirthDt").val();
		result.Tel=$("#Tel").val();
	});
});

</script>
